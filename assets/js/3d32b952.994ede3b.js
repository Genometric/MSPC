"use strict";(self.webpackChunkmspc=self.webpackChunkmspc||[]).push([[379],{6908:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"cli/parser","title":"Parser Configuration","description":"MSPC uses GeUtilities","source":"@site/docs/cli/parser.md","sourceDirName":"cli","slug":"/cli/parser","permalink":"/MSPC/docs/cli/parser","draft":false,"unlisted":false,"editUrl":"https://github.com/Genometric/MSPC/tree/dev/website/docs/cli/parser.md","tags":[],"version":"current","frontMatter":{"title":"Parser Configuration"},"sidebar":"someSidebar","previous":{"title":"Arguments","permalink":"/MSPC/docs/cli/args"},"next":{"title":"Performance","permalink":"/MSPC/docs/cli/benchmarking"}}');var s=t(4848),r=t(8453);const l={title:"Parser Configuration"},a=void 0,o={},c=[{value:"Column Order",id:"column-order",level:2},{value:"p-Value Format",id:"p-value-format",level:2},{value:"Peaks with Missing or Invalid p-Values",id:"peaks-with-missing-or-invalid-p-values",level:2},{value:"Culture info",id:"culture-info",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["MSPC uses ",(0,s.jsx)(n.a,{href:"https://github.com/Genometric/GeUtilities",children:"GeUtilities"}),"\nto parse BED files. Out of box, MSPC uses the default configuration\nof ",(0,s.jsx)(n.a,{href:"https://github.com/Genometric/GeUtilities",children:"GeUtilities"}),"; accordingly,\nit expects an input BED file to be in format similar to the following\nexample:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"chr1\t9999\t10039\tMACS_peak_1\t2.42\nchr1\t10101\t10190\tMACS_peak_2\t3.23\nchr1\t29303\t29382\tMACS_peak_3\t2.44\nchr1\t32600\t32680\tMACS_peak_4\t4.08\nchr1\t32726\t32936\tMACS_peak_5\t17.5\nchr1\t34689\t34797\tMACS_peak_6\t5.82\nchr1\t35083\t35124\tMACS_peak_7\t4.59\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The fifth column represents the p-value, and by default, MSPC expects\nit be in ",(0,s.jsx)(n.code,{children:"-Log10"})," format (read ",(0,s.jsx)(n.a,{href:"#p-value-format",children:"how to adjust this configuration"}),").\nAlso, by default, MSPC expects each peak\nto have a p-value; otherwise, that peak will not be parsed into MSPC."]}),"\n",(0,s.jsx)(n.p,{children:"A BED file may have additional columns; however, the content of\nthose columns will not be parsed into MSPC."}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.a,{href:"https://github.com/Genometric/GeUtilities",children:"GeUtilities"}),"\nparser is highly customizable that allows parsing BED files\nrepresented differently. The following JSON object contains\nall the configuration attributes, each discussed in details\nin the following sections."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n   "Chr":0,\n   "Left":1,\n   "Right":2,\n   "Name":3,\n   "Value":4,\n   "Strand":-1,\n   "Summit":-1,\n   "Culture":"en-US",\n   "PValueFormat":1,\n   "DefaultValue":0.0001,\n   "DropPeakIfInvalidValue":true\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"column-order",children:"Column Order"}),"\n",(0,s.jsx)(n.p,{children:"A BED file is a plain-text and tab-delimited file, it has multiple\ncolumns, and the type of data in each column follows widely adopted\nstandards with a number of variations. In order to correctly parse\ndifferent formats of BED files (standard or non-standard), without\nrequiring the users to convert them to a common format, MSPC allows\nusers to configure its parser by specifying the number of columns\nthat contain required information."}),"\n",(0,s.jsx)(n.p,{children:"For instance, if your samples are stranded, you may\nconfigure the parser as the following."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"chr1\t633859\t634162\tpeak_1\t137\t.\nchr1\t1079427\t1079669\tpeak_2\t67\t.\nchr1\t1109848\t1110187\tpeak_3\t91\t.\n"})}),"\n",(0,s.jsx)(n.p,{children:"Create a JSON file as the following:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{"Strand": 5}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["and execute MSPC as the following passing the\n",(0,s.jsx)(n.a,{href:"args#input-parser-configuration",children:"parser configuration"})," :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"mspc.exe -i inputs*.bed -r bio -w 1e-4 -s 1e-8 -p parser_config.json\n"})}),"\n",(0,s.jsxs)(n.p,{children:["where ",(0,s.jsx)(n.code,{children:"parser_config.json"})," is the filename of the file\ncontaining the JSON object you created above."]}),"\n",(0,s.jsx)(n.h2,{id:"p-value-format",children:"p-Value Format"}),"\n",(0,s.jsxs)(n.p,{children:["By default, MSPC expects p-values in a BED file to\nrepresented in ",(0,s.jsx)(n.code,{children:"-log10(p-value)"})," format. However,\nsome tools produce p-values in ",(0,s.jsx)(n.code,{children:"-10log10(p-value)"}),",\n",(0,s.jsx)(n.code,{children:"-100log10(p-value)"}),", or actual p-value (without\n",(0,s.jsx)(n.code,{children:"log10"})," scale). To set MSPC to correctly\nparse peaks according to their p-values representation,\nuse the ",(0,s.jsx)(n.code,{children:'"PValueFormat"'})," attribute in\nthe parser configuration JSON object according to\nthe following table:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Format"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"JSON attribute"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Example p-value from BED file"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Parsed p-value"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Same as input"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:'"PValueFormat":0'})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"0.001"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"0.001"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"-log10(p-value)"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:'"PValueFormat":1'})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"3"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"0.001"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"-10log10(p-value)"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:'"PValueFormat":2'})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"30"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"0.001"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"-100log10(p-value)"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:'"PValueFormat":3'})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"300"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"0.001"})})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["(See ",(0,s.jsx)(n.a,{href:"https://github.com/Genometric/GeUtilities/blob/30bb4691fc2ad37eda6131c6e3f3714c5464dbb4/GeUtilities/Intervals/Parsers/Bed/Enums.cs#L7%5D",children:"p-value formats"}),"\nof GeUtilities.)"]}),"\n",(0,s.jsx)(n.h2,{id:"peaks-with-missing-or-invalid-p-values",children:"Peaks with Missing or Invalid p-Values"}),"\n",(0,s.jsx)(n.p,{children:"Some BED files may not a valid p-value for some\nor none of the peaks in that file; for instance,\nBED files generated per cell in single-cell\nassays do not commonly provide a p-value\nper peak. Hence, following cases are possible:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"missing p-value for some peaks:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"chr1\t9999\t10039\tMACS_peak_1\t2.42\nchr1\t10101\t10190\tMACS_peak_2\t3.23\nchr1\t29303\t29382\tMACS_peak_3\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"none of the peaks have a p-value (commonly in\nsingle-cell assays):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"chr1\t9999\t10039\nchr1\t10101\t10190\nchr1\t29303\t29382\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"By default, MSPC drops all the peaks that\ndo not have a valid p-value. To set MSPC\nto read such peaks, use the following\nattribute in parser configuration JSON\nobject:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"DropPeakIfInvalidValue":false\n'})}),"\n",(0,s.jsxs)(n.p,{children:["With this configuration, MSPC sets the p-value\nof peaks with invalid/missing p-value to ",(0,s.jsx)(n.code,{children:"1E-8"}),"\n(see ",(0,s.jsx)(n.a,{href:"https://github.com/Genometric/GeUtilities/blob/30bb4691fc2ad37eda6131c6e3f3714c5464dbb4/GeUtilities/Intervals/Parsers/Bed/BedParserGeneric.cs#L89",children:"this initialization"}),").\nTo change the default p-value, use the following\nattribute in parser configuration JSON\nobject:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"DefaultValue":0.0001\n'})}),"\n",(0,s.jsx)(n.p,{children:"Hence, to read the previous example,\nset the parser configuration JSON object as\nthe following:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n   "Chr":0,\n   "Left":1,\n   "Right":2,\n   "DefaultValue":0.0001,\n   "DropPeakIfInvalidValue":true\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"culture-info",children:"Culture info"}),"\n",(0,s.jsxs)(n.p,{children:["Numbers can be formatted differently depending on the operating\nsystem's culture (or locale) settings. For instance, different\ncultures use ",(0,s.jsx)(n.em,{children:"dot"})," (",(0,s.jsx)(n.code,{children:"."}),"), ",(0,s.jsx)(n.em,{children:"comma"})," (",(0,s.jsx)(n.code,{children:","}),"), or ",(0,s.jsx)(n.em,{children:"forward slash"}),"\n(",(0,s.jsx)(n.code,{children:"/"}),") characters as decimal separators. Accordingly, the following\nnumbers formatted following different cultures are equal:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"- 1.234\n- 1,234\n- 1/234\n"})}),"\n",(0,s.jsxs)(n.p,{children:["MSPC parses numbers according to the culture setting of the\nexecution environment. For instance, on a operating system\nwith its ",(0,s.jsx)(n.em,{children:"region"})," set to US, MSPC considers ",(0,s.jsx)(n.em,{children:"dot"})," (",(0,s.jsx)(n.code,{children:"."}),") as\na decimal separator."]}),"\n",(0,s.jsxs)(n.p,{children:["In some scenarios input data format may not adhere with the\nculture setting of the operating system. For instance, a scientist\nin Europe (where a ",(0,s.jsx)(n.em,{children:"comma"})," character (",(0,s.jsx)(n.code,{children:","}),") is used as decimal separator)\nanalyzing data generated by a collaborator from US (where a ",(0,s.jsx)(n.em,{children:"dot"}),"\ncharacter('.') is used as decimal separator). For such scenarios\nyou may explicitly specify the culture info of the input data\nusing the ",(0,s.jsx)(n.code,{children:"Culture"})," attribute in parser configuration json file.\nFor instance, the following configuration sets MSPC to read\nnumbers formatted in US style independent from culture setting\nof the operating system:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n   "Chr":0,\n   "Left":1,\n   "Right":2,\n   "Name":3,\n   "Value":4,\n   "Culture":"en-US"\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["You may refer to the ",(0,s.jsx)(n.code,{children:"Language tag"})," column in the list of language and region\nnames supported by Windows available in\n",(0,s.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c",children:"this page"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"The numbers written to the output files generated by MSPC are\nformatted according to the operating system's settings, independent\nfrom the culture setting provided for the input parser."})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>a});var i=t(6540);const s={},r=i.createContext(s);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);