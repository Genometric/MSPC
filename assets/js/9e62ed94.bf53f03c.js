"use strict";(self.webpackChunkmspc=self.webpackChunkmspc||[]).push([[265],{8013:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"cli/benchmarking","title":"Performance","description":"We continuously improve MSPC\u2019s performance. We strive to speed up","source":"@site/docs/cli/benchmarking.md","sourceDirName":"cli","slug":"/cli/benchmarking","permalink":"/MSPC/docs/cli/benchmarking","draft":false,"unlisted":false,"editUrl":"https://github.com/Genometric/MSPC/tree/dev/website/docs/cli/benchmarking.md","tags":[],"version":"current","frontMatter":{"title":"Performance"},"sidebar":"someSidebar","previous":{"title":"Parser Configuration","permalink":"/MSPC/docs/cli/parser"},"next":{"title":"Install","permalink":"/MSPC/docs/library/install"}}');var i=r(4848),t=r(8453);const o={title:"Performance"},a=void 0,c={},l=[{value:"Benchmark a Released Version",id:"benchmark-a-released-version",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"We continuously improve MSPC\u2019s performance. We strive to speed up\nthe runtime and decrease resource requirements with every release.\nWe stress-test every release of MSPC and benchmark it against earlier\nversions to identify and resolve performance regression."}),"\n",(0,i.jsx)(n.p,{children:"We use the following resources for benchmarking MSPC:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Test data."})," We use ",(0,i.jsx)(n.code,{children:"48"})," randomly selected experiments from ENCODE,\nwhere each contains two [biological] replicates. We then call peaks\non these samples using ",(0,i.jsx)(n.code,{children:"MACS2"})," with permissive p-value threshold (cutoff at ",(0,i.jsx)(n.code,{children:"0.0001"}),").\nThe peaks we called on the samples of this cohort are available from the\nfollowing page: ",(0,i.jsx)(n.a,{href:"https://osf.io/jqrwu/",children:"https://osf.io/jqrwu/"}),".\nPlease visit ",(0,i.jsx)(n.a,{href:"/MSPC/docs/sample_data",children:"sample data"})," page for details and other cohorts."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Benchmarking scripts."})," We have developed a console application written\nin C# for benchmarking different releases of MSPC\n(see ",(0,i.jsx)(n.a,{href:"#benchmark-a-release-version",children:"this section"})," on how to use it).\nThe application is distributed along with MSPC as ",(0,i.jsx)(n.code,{children:"benchmark.exe"}),",\nand its source code is available from the ",(0,i.jsx)(n.a,{href:"https://github.com/Genometric/MSPC/tree/dev/Benchmark",children:"MSPC/Benchmark on github"}),".\nThis code currently supports releases ",(0,i.jsxs)(n.a,{href:"https://github.com/Genometric/MSPC/blob/909dc99eecbf60646fb44d59a1646b10efef4a77/Benchmark/VersionInfo.cs#L49",children:[(0,i.jsx)(n.code,{children:"v5.x"}),", ",(0,i.jsx)(n.code,{children:"v4.x"}),", ",(0,i.jsx)(n.code,{children:"v2.x"}),", and ",(0,i.jsx)(n.code,{children:"v1.1"})]}),"\nand other release will be added."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Jupyter Notebook for Downstream Analysis of Benchmarks."}),"\nWe have developed a Jupyter Notebook for plotting and\nin-depth analysis of the runtime. The notebook can be\nexecuted on Colab, and is available from\n",(0,i.jsx)(n.a,{href:"https://github.com/Genometric/MSPC/blob/dev/Benchmark/PlotBenchmarkings.ipynb",children:"MSPC github page"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Our Benchmarks."})," We publicly distribute the results\nof running ",(0,i.jsx)(n.code,{children:"benchmark.exe"})," on the aforementioned cohort\nat the following page. ",(0,i.jsx)(n.a,{href:"https://osf.io/jqrwu/",children:"https://osf.io/jqrwu/"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"benchmark-a-released-version",children:"Benchmark a Released Version"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"benchmark"})," program takes the following arguments and\nruns every specified version of MSPC on the given cohort,\nand reports the runtime and resource usage in the output."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"--release"}),": A list of ",(0,i.jsx)(n.em,{children:"tag"})," names of public MSPC releases\n(as labeled and avaialble on the ",(0,i.jsx)(n.a,{href:"https://github.com/Genometric/MSPC/releases",children:"Releases page"}),");"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"--data-dir"}),": A directory that contains the test cohort,\nwhich is expected to have a structure similar to the\nfollowing."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u251c\u2500\u2500 ENCSR000BNU\n\u2502\xa0\xa0 \u251c\u2500\u2500 ENCFF308RGN-rep1.bed\n\u2502\xa0\xa0 \u2514\u2500\u2500 ENCFF438DHS-rep2.bed\n\u251c\u2500\u2500 ENCSR000EFR\n\u2502\xa0\xa0 \u251c\u2500\u2500 ENCFF276XFZ-rep2.bed\n\u2502\xa0\xa0 \u2514\u2500\u2500 ENCFF387NUG-rep1.bed\n...\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"--max-rep-count"}),": Set the maximum number of replicates to be used for benchmarking.\nThe program starts benchmarking MSPC at minimum two replicates, and iteratively increases\nthe number of replicates until ",(0,i.jsx)(n.code,{children:"--max-rep-count"}),". If the experiment does not have the\nset number of replicates, the ",(0,i.jsx)(n.code,{children:"benchmark"})," program will automatically generate synthetic\nreplicates by randomly alternating the given replicates. For instance, if ",(0,i.jsx)(n.code,{children:"--max-rep-count 4"}),",\n",(0,i.jsx)(n.code,{children:"benchmark"})," will run the following tests for the experiment ",(0,i.jsx)(n.code,{children:"ENCSR000BNU"})," (as shown in the above example):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# Run 1:\n$ mspc.exe -i ENCFF308RGN-rep1.bed -i ENCFF438DHS-rep2.bed\n\n# Run 2:\n$ mspc.exe -i ENCFF308RGN-rep1.bed -i ENCFF438DHS-rep2.bed \\\n           -i ENCFF308RGN-rep1-randomly-modified.bed\n\n# Run 3:\n$ mspc.exe -i ENCFF308RGN-rep1.bed -i ENCFF438DHS-rep2.bed \\\n           -i ENCFF308RGN-rep1-randomly-modified.bed \\\n           -i ENCFF438DHS-rep2-randomly-modified.bed\n"})}),"\n",(0,i.jsx)(n.p,{children:"For brevity, other required arguments of MSPC are not shown."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var s=r(6540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);